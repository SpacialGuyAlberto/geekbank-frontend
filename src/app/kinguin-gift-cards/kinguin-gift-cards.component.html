<!-- Paginación Angular Material (Superior) -->
<div class="pagination-container" *ngIf="isSearchMode">
  <mat-paginator
    [length]="totalItems"
    [pageSize]="itemsPerPage"
    [pageSizeOptions]="[5, 10, 20, 50]"
    (page)="onPageChange($event)">
  </mat-paginator>
</div>

<div
  [ngClass]="{
    'gift-cards-container': !isSearchMode,
    'gift-cards-container-search': isSearchMode
  }">

  <!-- Indicador de Carga -->
  <div *ngIf="isLoading && isSearchMode" class="loading-indicator">
    <div class="bars">
      <div class="bar bar1"></div>
      <div class="bar bar2"></div>
      <div class="bar bar3"></div>
      <div class="bar bar4"></div>
      <div class="bar bar5"></div>
    </div>
  </div>

  <!-- Lista de Gift Cards -->
  <div
    *ngFor="let card of displayedGiftCards"
    [ngClass]="{
      'gift-card': !isSearchMode,
      'gift-card-search': isSearchMode
    }"
    (click)="viewDetails(card)">

    <div
      [ngClass]="{
        'image-container': !isSearchMode,
        'image-container-search': isSearchMode
      }">
      <img
        [src]="card.coverImageOriginal"
        alt="{{ card.name }}"
        [ngClass]="{
          'gift-card-image': !isSearchMode,
          'gift-card-image-search': isSearchMode
        }">
    </div>

    <div
      [ngClass]="{
        'gift-card-content': !isSearchMode,
        'gift-card-content-search': isSearchMode
      }">
      <!-- Span de Descuento -->
      <span
        [ngClass]="{
          'discount-percentage': !isSearchMode,
          'discount-percentage-search': isSearchMode
        }">
        {{ card.randomDiscount }}% OFF
      </span>

      <!-- Título de la Gift Card -->
      <h3
        [ngClass]="{
          'gift-card-title': !isSearchMode,
          'gift-card-title-search': isSearchMode
        }">
        {{ card.name }}
      </h3>

      <!-- Plataforma y Géneros -->
      <span
        [ngClass]="{
          'platform': !isSearchMode,
          'platform-search': isSearchMode
        }">
        {{ card.platform }}
      </span>

      <!-- Precio de la Gift Card -->
      <div
        [ngClass]="{
          'gift-card-price': !isSearchMode,
          'gift-card-price-search': isSearchMode
        }">
        <span
          [ngClass]="{
            'original-price': !isSearchMode,
            'original-price-search': isSearchMode
          }">
          {{
             card.price  | convertToHnl: exchangeRate | autogenerateDiscount: card.name  | currency:'HNL':'symbol':'1.2-2'
          }}
        </span>
        <span
          [ngClass]="{
            'discounted-price': !isSearchMode,
            'discounted-price-search': isSearchMode
          }">
          {{ card.price | convertToHnl: exchangeRate | currency:'HNL':'symbol':'1.2-2' }}
        </span>
      </div>
    </div>
  </div>
</div>

<div class="pagination-container" *ngIf="!isSearchMode && totalPagesMain > 1">
  <mat-paginator
    #mainPaginator
    [length]="totalItemsMain"
    [pageSize]="pageSizeMain"
    [pageIndex]="currentPageMain"
    [pageSizeOptions]="[5, 10, 20, 50]"
    (page)="onPageChangeMain($event)"

  >
  </mat-paginator>
</div>
<div class="pagination-container" *ngIf="isSearchMode && totalPages > 0">
  <mat-paginator
    [length]="totalItems"
    [pageSize]="itemsPerPage"
    [pageSizeOptions]="[5, 10, 20, 50]"
    (page)="onPageChange($event)">
  </mat-paginator>
</div>
