<div class="payment-methods-container">
  <h2>Métodos de Pago</h2>

  <!-- Métodos de pago actuales -->
  <div class="current-payment-methods">
    <h3>Mis Métodos de Pago</h3>

    <div *ngFor="let paymentMethod of paymentMethods" class="payment-method-item">
      <!-- Íconos dinámicos según el tipo de método de pago -->
      <i *ngIf="paymentMethod.type === 'Tarjeta' && paymentMethod.provider === 'Visa'" class="fa-brands fa-cc-visa payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'Tarjeta' && paymentMethod.provider === 'MasterCard'" class="fa-brands fa-cc-mastercard payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'PayPal'" class="fa-brands fa-paypal payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'Google Pay'" class="fa-brands fa-google-pay payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'Wallet Virtual'" class="fas fa-wallet payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'Blockchain' && paymentMethod.cryptoCurrency === 'Bitcoin'" class="fa-brands fa-bitcoin payment-icon"></i>
      <i *ngIf="paymentMethod.type === 'Blockchain' && paymentMethod.cryptoCurrency === 'Ethereum'" class="fa-brands fa-ethereum payment-icon"></i>
<!--      <i *ngIf="!paymentMethod.icon" class="fas fa-credit-card payment-icon"></i>-->

      <div class="payment-details">
        <p><strong>Tipo:</strong> {{ paymentMethod.type }} {{ paymentMethod.provider ? '(' + paymentMethod.provider + ')' : '' }}</p>
        <p *ngIf="paymentMethod.lastFourDigits"><strong>Últimos 4 dígitos:</strong> {{ paymentMethod.lastFourDigits }}</p>
        <p *ngIf="paymentMethod.expiryDate"><strong>Expiración:</strong> {{ paymentMethod.expiryDate }}</p>
        <p *ngIf="paymentMethod.walletAddress"><strong>Dirección del Monedero:</strong> {{ paymentMethod.walletAddress }}</p>
        <p *ngIf="paymentMethod.country"><strong>País:</strong> {{ paymentMethod.country }}</p>
        <p *ngIf="paymentMethod.cryptoCurrency"><strong>Criptomoneda:</strong> {{ paymentMethod.cryptoCurrency }}</p>
      </div>
      <div class="action-buttons">
        <button (click)="editPaymentMethod(paymentMethod)">Editar</button>
        <button (click)="removePaymentMethod(paymentMethod)">Eliminar</button>
      </div>
    </div>
  </div>

  <!-- Añadir nuevo método de pago -->
  <div class="add-payment-method">
    <h3>Añadir Nuevo Método de Pago</h3>
    <form (ngSubmit)="addPaymentMethod()" class="payment-method-form">
      <div class="form-group">
        <label for="type">Tipo de Método</label>
        <select id="type" [(ngModel)]="newPaymentMethod.type" name="type" required>
          <option value="" disabled selected>Seleccione...</option>
          <option value="Tarjeta">Tarjeta de Crédito/Débito</option>
          <option value="PayPal">PayPal</option>
          <option value="Google Pay">Google Pay</option>
          <option value="Wallet Virtual">Monedero Virtual</option>
          <option value="Blockchain">Blockchain</option>
        </select>
      </div>

      <!-- Si el método es Tarjeta -->
      <div *ngIf="newPaymentMethod.type === 'Tarjeta'">
        <div class="form-group">
          <label for="provider">Proveedor</label>
          <select id="provider" [(ngModel)]="newPaymentMethod.provider" name="provider" required>
            <option value="" disabled selected>Seleccione...</option>
            <option value="Visa">Visa</option>
            <option value="MasterCard">MasterCard</option>
            <option value="Amex">Amex</option>
          </select>
        </div>

        <div class="form-group">
          <label for="cardNumber">Número de Tarjeta</label>
          <input type="text" id="cardNumber" [(ngModel)]="newPaymentMethod.cardNumber" name="cardNumber" required>
        </div>

        <div class="form-group">
          <label for="expiryDate">Fecha de Expiración</label>
          <input type="text" id="expiryDate" [(ngModel)]="newPaymentMethod.expiryDate" name="expiryDate" placeholder="MM/AA" required>
        </div>
      </div>

      <!-- Si el método es PayPal o Google Pay -->
      <div *ngIf="newPaymentMethod.type === 'PayPal' || newPaymentMethod.type === 'Google Pay'">
        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input type="email" id="email" [(ngModel)]="newPaymentMethod.email" name="email" required>
        </div>
      </div>

      <!-- Si el método es Monedero Virtual -->
      <div *ngIf="newPaymentMethod.type === 'Wallet Virtual'">
        <div class="form-group">
          <label for="walletAddress">Dirección del Monedero</label>
          <input type="text" id="walletAddress" [(ngModel)]="newPaymentMethod.walletAddress" name="walletAddress" required>
        </div>

        <div class="form-group">
          <label for="cryptoCurrency">Criptomoneda</label>
          <select id="cryptoCurrency" [(ngModel)]="newPaymentMethod.cryptoCurrency" name="cryptoCurrency" required>
            <option value="" disabled selected>Seleccione...</option>
            <option value="Bitcoin">Bitcoin</option>
            <option value="Ethereum">Ethereum</option>
            <option value="USDT">USDT</option>
          </select>
        </div>
      </div>

      <!-- Si el método es Blockchain -->
      <div *ngIf="newPaymentMethod.type === 'Blockchain'">
        <div class="form-group">
          <label for="blockchainNetwork">Red de Blockchain</label>
          <select id="blockchainNetwork" [(ngModel)]="newPaymentMethod.blockchainNetwork" name="blockchainNetwork" required>
            <option value="" disabled selected>Seleccione...</option>
            <option value="Bitcoin">Bitcoin</option>
            <option value="Ethereum">Ethereum</option>
            <option value="Solana">Solana</option>
          </select>
        </div>

        <div class="form-group">
          <label for="walletAddress">Dirección de la Billetera</label>
          <input type="text" id="walletAddress" [(ngModel)]="newPaymentMethod.walletAddress" name="walletAddress" required>
        </div>
      </div>

      <button type="submit" class="btn-submit">Añadir Método de Pago</button>
    </form>
  </div>
</div>
